[BB]
name = catalog
command = ls
image = docker-registry:31978/xel_bb_catalog:v1.0
environment = TPS_MANAGER=http://tps_manager:5000;API_GATEWAY=coordinator:5555;NETWORK=1df2b9e931bf0003653db4e35a32a975619d6ee0717be3a1d5c2ed65facc429e;SERVICE_NAME=catalogs;SERVICE_IP=bb_catalogs_0;SERVICE_PORT=80
[END]

[BB]
name = transform
command = ls
image = docker-registry:31978/xel_bb_transform:v1.0
environment = TPS_MANAGER=http://tps_manager:5000;API_GATEWAY=coordinator:5555;NETWORK=1df2b9e931bf0003653db4e35a32a975619d6ee0717be3a1d5c2ed65facc429e;SERVICE_NAME=catalogs;SERVICE_IP=bb_catalogs_0;SERVICE_PORT=80
[END]

[PATTERN]
name = catalogpattern
task = catalog
pattern = MW
workers = 8
loadbalancer = TC:DL
[END]

[PATTERN]
name = transformpattern
task = transform
pattern = MW
workers = 2
loadbalancer = TC:DL
[END]

[STAGE]
name = stage_catalog
source = @PWD/xelhua/inputs
sink = 
transformation = catalogpattern
[END]

[STAGE]
name = stage_transform
source = @PWD/xelhua/inputs
sink = 
transformation = transformpattern
[END]

[WORKFLOW]
name = xelhua
stages = stage_catalog stage_transform
[END]